
<h2 class= "text-center">Tournaments</h2>
<br><br><br>
<div class="text-center">
  <div class="container">
    <% @tournaments.each do  |tournament| %>
    <div class="see">
      <div class="col-lg-4">
        <div class="flip">
          <div class="cardi">
            <div class="face front">
             <%= tournament.name %>
           </div>
           <div class="face back">
             <div class="address"><%= tournament.date %></div>
           </div>
         </div>
       </div>
       <%= link_to "See", tournament_path(tournament) %>
     </div>
     <div>

     </div>
   </div>
   <% end %>
 </div>
 <br><br>
 <%= link_to "Add a new tournament", new_tournament_path %>
</div>
<br>
<div id="map" style="width: 100%; height: 400px;"></div>
<% content_for(:after_js) do %>
<%= javascript_tag do %>
$(document).ready(function() {
var handler = Gmaps.build('Google');
handler.buildMap({ internal: { id: 'map' } }, function() {
markers = handler.addMarkers(<%= raw @hash.to_json %>);
handler.bounds.extendWith(markers);
handler.fitMapToBounds();
if (markers.length == 0) {
handler.getMap().setZoom(2);
} else if (markers.length == 1) {
handler.getMap().setZoom(14);
}
});
});
<% end %>
<% end %>
<script type="text/javascript">
  $('.flip').click(function(){
    $(this).find('.cardi').addClass('flipped').mouseleave(function(){
      $(this).removeClass('flipped');
    });
    return false;
  });
</script>
